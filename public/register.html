<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Register Online</title>
  <link rel="icon" href="/favicon.png" />

  <!-- Saved assets from: https://ucags.edu.lk/register-online/ -->
  <!-- NOTE: These are loaded locally from /ucags_register_files to enable pixel-identical rendering without hitting the live site. -->
  <link rel="stylesheet" href="/ucags_register_files/dmsans.css" />
  <link rel="stylesheet" href="/ucags_register_files/cormorant.css" />

  <link rel="stylesheet" href="/ucags_register_files/main.min.css" />
  <link rel="stylesheet" href="/ucags_register_files/frontend.min.css" />
  <link rel="stylesheet" href="/ucags_register_files/elementor-icons.min.css" />

  <link rel="stylesheet" href="/ucags_register_files/all.min.css" />
  <link rel="stylesheet" href="/ucags_register_files/v4-shims.min.css" />
  <link rel="stylesheet" href="/ucags_register_files/fontawesome.css" />
  <link rel="stylesheet" href="/ucags_register_files/brands.css" />
  <link rel="stylesheet" href="/ucags_register_files/solid.css" />

  <link rel="stylesheet" href="/ucags_register_files/header-footer-elementor.css" />
  <link rel="stylesheet" href="/ucags_register_files/metform-ui.css" />
  <link rel="stylesheet" href="/ucags_register_files/style(1).css" />
  <link rel="stylesheet" href="/ucags_register_files/base-desktop.css" />
  <link rel="stylesheet" href="/ucags_register_files/widget-social-icons.min.css" />
  <link rel="stylesheet" href="/ucags_register_files/widget-heading.min.css" />

  <!-- Elementor kit + page-specific CSS (contains the exact global colors/typography) -->
  <link rel="stylesheet" href="/ucags_register_files/post-4322.css" />
  <link rel="stylesheet" href="/ucags_register_files/post-3787.css" />

  <!-- Keep CRM styles for shared button styles and inputs (used by this page) -->
  <link rel="stylesheet" href="/css/styles.css" />

  <style>
    :root {
      /* Exact global colors from saved Elementor kit (post-4322.css):
         --e-global-color-730e9b0 = #592C88
         --e-global-color-c54ab47 = #FFFFFF
      */
      --ucags-accent: var(--e-global-color-730e9b0, #592C88);
      --ucags-border: rgba(255,255,255,0.25);
      --ucags-overlay: #010035; /* from Elementor export */
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: "DM Sans", sans-serif;
      background: #ffffff;
    }

    /* HERO (from Elementor export) */
    .ucags-register-hero {
      position: relative;
      padding: 320px 0 80px;
      overflow: hidden;
      background-color: #000;
      background-position: center center;
      background-size: cover;
      transition: background-image 800ms ease;
    }

    .ucags-register-hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: var(--ucags-overlay);
      opacity: 0.70;
      pointer-events: none;
    }

    .ucags-register-hero::after {
      content: "";
      position: absolute;
      inset: 0;
      background-image: url("/ucags_register_files/Background-arizon.png");
      background-position: center center;
      background-repeat: no-repeat;
      background-size: cover;
      opacity: 0.55;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .ucags-register-hero .elementor-container,
    .ucags-register-content .elementor-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
      position: relative;
      z-index: 1;
    }

    .ucags-hero-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      align-items: center;
    }

    @media (max-width: 768px) {
      .ucags-register-hero { padding: 180px 0 70px; }
      .ucags-hero-grid { grid-template-columns: 1fr; }
    }

    /* Headings mimic Elementor typography (best-effort) */
    .ucags-hero-eyebrow {
      margin: 0;
      color: #ffffff;
      font-family: "Cormorant", serif;
      font-size: 48px;
      font-weight: 600;
      line-height: 1.05;
    }

    .ucags-hero-title {
      margin: 4px 0 0;
      color: #ffffff;
      font-family: "Cormorant", serif;
      font-size: 72px;
      font-weight: 700;
      line-height: 0.95;
      text-align: left;
    }

    @media (max-width: 768px) {
      .ucags-hero-eyebrow { font-size: 36px; }
      .ucags-hero-title { font-size: 54px; }
    }

    /* CONTENT area */
    .ucags-register-content {
      padding: 60px 0 80px;
      background: #ffffff;
    }

    .ucags-register-h2 {
      margin: 0;
      text-align: center;
      font-family: "Cormorant", serif;
      font-size: 44px;
      font-weight: 700;
      color: var(--ucags-accent);
    }

    .ucags-form-shell {
      /* Elementor export (metform widget): margin top 17px, left ~204px, right ~214px,
         and padding top 40px right 5px bottom 30px left 15px.
         We approximate this with a fixed max width that matches those margins inside a 1200px container. */
      max-width: 782px;
      margin: 17px auto 0;
      padding: 40px 5px 30px 15px;
      border: 1px solid var(--ucags-border);
      background: #ffffff;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    }

    /* MetForm-like spacing + typography */
    .ucags-form-shell .ucags-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px 18px;
    }

    @media (max-width: 720px) {
      .ucags-form-shell .ucags-grid { grid-template-columns: 1fr; }
    }

    .ucags-field label {
      display: block;
      margin: 0 0 8px;
      font-size: 14px;
      font-weight: 600;
      color: #1f1f1f;
    }

    .ucags-field input,
    .ucags-field select {
      width: 100%;
      height: 46px;
      padding: 10px 14px;
      border: 1px solid rgba(0,0,0,0.18);
      border-radius: 2px;
      background: #fff;
      font-size: 15px;
      outline: none;
      transition: border-color 150ms ease, box-shadow 150ms ease;
    }

    .ucags-field input:focus,
    .ucags-field select:focus {
      border-color: rgba(0,0,0,0.45);
      box-shadow: 0 0 0 3px rgba(200,155,60,0.18);
    }

    .ucags-actions {
      display: flex;
      justify-content: center;
      margin-top: 18px;
    }

    /* Prefer WP/Astra button styles if present, but ensure it looks like the site */
    .ucags-submit {
      padding: 14px 34px;
      border-radius: 2px;
      border: 0;
      background: var(--ucags-accent);
      color: #fff;
      font-weight: 700;
      letter-spacing: 0.3px;
      cursor: pointer;
    }

    .ucags-submit:disabled { opacity: 0.7; cursor: not-allowed; }

    .ucags-status {
      margin-top: 14px;
      text-align: center;
      font-size: 14px;
      display: none;
    }

    .ucags-status.ok { color: #1b5e20; }
    .ucags-status.err { color: #b71c1c; }

    .ucags-topbar {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 2;
      padding: 18px 0;
    }

    .ucags-topbar .inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      color: #fff;
    }

    .ucags-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: inherit;
    }

    .ucags-brand img { width: 44px; height: 44px; object-fit: contain; }
    .ucags-official-link { color: #fff; text-decoration: none; font-weight: 600; }
    .ucags-official-link:hover { text-decoration: underline; }
  </style>
</head>

<body class="ast-page-builder-template astra wp-custom-logo ast-single-post ast-inherit-site-logo-transparent ast-theme-transparent-header elementor-default elementor-kit-4322 elementor-page elementor-3787">

  <header class="ucags-topbar" aria-label="Header">
    <div class="inner">
      <a class="ucags-brand" href="https://ucags.edu.lk/" target="_blank" rel="noreferrer">
        <img src="/logo.png" alt="UCAGS" />
        <span style="font-weight:700; letter-spacing:0.2px;">UCAGS</span>
      </a>
      <a class="ucags-official-link" href="https://ucags.edu.lk/register-online/" target="_blank" rel="noreferrer">Official Page</a>
    </div>
  </header>

  <!-- HERO: matches Elementor export (section padding + slideshow + overlay) -->
  <section class="ucags-register-hero elementor-section elementor-top-section" aria-label="Hero">
    <div class="elementor-container">
      <div class="ucags-hero-grid">
        <div>
          <h2 class="ucags-hero-eyebrow">Quick &amp; Easy</h2>
          <h1 class="ucags-hero-title">Registration</h1>
        </div>
        <div></div>
      </div>
    </div>
  </section>

  <!-- FORM AREA -->
  <main class="ucags-register-content" aria-label="Register">
    <div class="elementor-container">
      <h2 class="ucags-register-h2">Register Here</h2>

      <div class="ucags-form-shell">
        <form id="registrationForm" novalidate>
          <div class="ucags-grid">
            <div class="ucags-field">
              <label for="reg_name">Name *</label>
              <input id="reg_name" name="name" type="text" required />
            </div>

            <div class="ucags-field">
              <label for="reg_gender">Gender *</label>
              <select id="reg_gender" name="gender" required>
                <option value="">Select</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <div class="ucags-field">
              <label for="reg_dob">Date of Birth</label>
              <input id="reg_dob" name="date_of_birth" type="date" />
            </div>

            <div class="ucags-field">
              <label for="reg_country">Country</label>
              <input id="reg_country" name="country" type="text" />
            </div>

            <div class="ucags-field" style="grid-column: 1 / -1;">
              <label for="reg_address">Address</label>
              <input id="reg_address" name="address" type="text" />
            </div>

            <div class="ucags-field">
              <label for="reg_phone">Phone Number *</label>
              <input id="reg_phone" name="phone_number" type="tel" required />
            </div>

            <div class="ucags-field">
              <label for="reg_wa">WA Number</label>
              <input id="reg_wa" name="wa_number" type="tel" />
            </div>

            <div class="ucags-field">
              <label for="reg_email">Email</label>
              <input id="reg_email" name="email" type="email" />
            </div>

            <div class="ucags-field">
              <label for="reg_working">Working Status</label>
              <input id="reg_working" name="working_status" type="text" placeholder="e.g. Working / Student" />
            </div>
          </div>

          <div class="ucags-actions">
            <button id="regSubmitBtn" class="ucags-submit" type="submit">Submit</button>
          </div>

          <div id="regStatus" class="ucags-status"></div>
        </form>
      </div>
    </div>
  </main>

  <script>
    // Background slideshow gallery extracted from Elementor export for the official page.
    const ucagsHeroImages = [
      '/ucags_register_files/modern-living-room-with-black-leather-sofa-in-front-of-a-wooden-panel.jpg',
      '/ucags_register_files/black-wooden-furniture-and-an-industrial-lamp-above-a-coffee-mac.jpg',
      '/ucags_register_files/3d-rendering-luxury-and-modern-living-room-with-good-design-leather-sofa.jpg'
    ];

    (function initHeroSlideshow(){
      const hero = document.querySelector('.ucags-register-hero');
      if (!hero) return;

      let i = 0;
      function apply(){
        hero.style.backgroundImage = 'url(' + ucagsHeroImages[i] + ')';
      }
      apply();

      // Simple fade-like swap (Elementor uses ken burns; this is a lightweight approximation)
      setInterval(() => {
        i = (i + 1) % ucagsHeroImages.length;
        apply();
      }, 6500);
    })();

    function showStatus(message, kind) {
      const el = document.getElementById('regStatus');
      el.style.display = 'block';
      el.textContent = message;
      el.className = 'ucags-status ' + (kind || '');
    }

    function hideStatus() {
      const el = document.getElementById('regStatus');
      el.style.display = 'none';
      el.textContent = '';
      el.className = 'ucags-status';
    }

    document.getElementById('registrationForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      hideStatus();

      const btn = document.getElementById('regSubmitBtn');
      btn.disabled = true;
      const oldText = btn.textContent;
      btn.textContent = 'Submitting...';

      try {
        const form = e.target;
        const fd = new FormData(form);
        const payload = Object.fromEntries(fd.entries());

        // Basic required validation to mimic MetForm behaviour
        if (!payload.name || !payload.gender || !payload.phone_number) {
          throw new Error('Please fill the required fields.');
        }

        const res = await fetch('/api/registrations/intake', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const json = await res.json().catch(() => ({}));
        if (!res.ok || !json.success) throw new Error(json.error || 'Failed');

        showStatus('Registration submitted successfully', 'ok');
        form.reset();
      } catch (err) {
        showStatus(err.message || 'Error submitting registration', 'err');
      } finally {
        btn.disabled = false;
        btn.textContent = oldText;
      }
    });
  </script>
</body>
</html>
